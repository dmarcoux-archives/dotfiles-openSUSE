################################
#
# Dependencies:
# fontawesome-fonts
#
################################

#################
# Variables
#################

# Modifier key is the Windows Key
set $mod Mod4

# Workspaces
set $WS1 "1: 1"
set $WS2 "2: 2"
set $WS3 "3: 3"
set $WS4 "4: 4"
set $WS5 "5: 5"
set $WS6 "6: 6"

#################
# Colorscheme
#################

# Solarized (Light) colors
# Without alpha (for i3)
set $black         #002B36
set $grey          #839496
set $dark_beige    #EEE8D5
set $light_beige   #FDF6E3
set $yellow        #B58900
set $orange        #CB4B16
set $red           #DC322F
set $magenta       #D33682
set $violet        #6C71C4
set $blue          #268BD2
set $cyan          #2AA198
set $green         #859900

# TYPE                   BORDER BACKGROUND TEXT
client.focused           $green $green     $light_beige
client.unfocused         $grey  $grey      $light_beige
client.focused_inactive  $grey  $grey      $light_beige
client.urgent            $red   $red       $light_beige

#################
# Settings
#################

# Put workspaces on specific screens
workspace $WS3 output primary

# Window focus doesn't follow mouse movements
focus_follows_mouse no

# Focus stays in the same parent container
force_focus_wrapping yes

# New containers on workspace starts in tabbed mode
workspace_layout tabbed

# Font for window titles. Will also be used by the bar unless a different font is used in the bar {} block below.
font pango:DejaVu Sans Mono 13

# Use LeftMouse+$mod on a floating window to drag it to the wanted position
# Use RightMouse+$mod on a floating window to resize it
floating_modifier $mod

bar {
    status_command i3status
    position top
    font pango:DejaVu Sans Mono 13
    strip_workspace_numbers yes

    # Put the tray output on the primary screen
    tray_output primary

    colors {
        # Solarized (Light) colors
        background $light_beige
        statusline $grey
        separator  $grey

        # TYPE              BORDER      BACKGROUND  TEXT
        focused_workspace   $green      $green      $light_beige
        active_workspace    $violet     $violet     $light_beige
        inactive_workspace  $dark_beige $dark_beige $grey
        urgent_workspace    $red        $red        $light_beige
    }
}

exec_always --no-startup-id ~/dotfiles/scripts/set_keyboard_layout.sh

# Disable touchpad and trackpoint on the first run
exec --no-startup-id ~/dotfiles/scripts/toggle_touchpad_trackpoint.sh

#################
# Applications
#################

# Assign applications to workspaces to have them start on a specific workspace
# - To find the class for the assign statement:
#   1. Start program
#   2. Start xprop
#   3. Click on program's window
#   4. Get value of 'WM_CLASS(STRING)' from xprop's output
assign [class="^Firefox"] → $WS2

assign [class="^Hexchat$"] → $WS3
assign [class="^Pidgin$"] → $WS3
assign [class="^Mumble$"] → $WS3

assign [class="^Thunderbird$"] → $WS4

assign [class="^Vlc$"] → $WS5

# Kill potentially hung up audio server (it happens when a user logs out and back in)
exec --no-startup-id killall pulseaudio

# Launch audio server
exec --no-startup-id pulseaudio --start

# Launch volume mixer
exec --no-startup-id pnmixer

# Launch daemon for automounting optical and removable drives
exec --no-startup-id udiskie --tray

# Launch clipboard manager
exec --no-startup-id clipmenud

# Launch terminal
exec termite

# Launch web browser
exec $BROWSER

# Launch IRC client
exec hexchat

# Launch email client
exec thunderbird

# Launch time+location-based color temperature adjuster for monitors
exec --no-startup-id redshift-gtk -c ~/.config/redshift/config

# Launch network manager
exec --no-startup-id nm-applet

# Launch emacs server (to launch spacemacs quickly)
exec --no-startup-id emacs --daemon

# Launch power manager (battery and screen brightness)
exec --no-startup-id xfce4-power-manager

# Launch idle mouse cursor hider
exec --no-startup-id unclutter

# Launch screen locker
exec --no-startup-id light-locker

#################
# Key bindings
#################

# Restart i3 (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# Lock the screen
bindsym $mod+Shift+C exec --no-startup-id "light-locker-command --lock"

# Start a terminal
bindsym $mod+Return exec termite

# Kill the focused window
bindsym $mod+Shift+Escape kill

# Start program launcher
bindsym $mod+d exec rofi -show drun # Only list applications shipping a .desktop file

# Start window switcher
bindsym $mod+s exec rofi -show window

# Start rofi frontend to pass for my usernames
bindsym $mod+u exec rofi -show pass-username

# Start rofi frontend to pass-otp for my two-factor authentication (2FA) codes
bindsym $mod+o exec rofi -show pass-otp

# Start rofi frontend to pass for my passwords
bindsym $mod+p exec rofi -show pass

# Start rofi frontend to clipboard manager
bindsym $mod+c exec CM_LAUNCHER=rofi clipmenu -p 'clipboard'

# Change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Move the focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# Move the focused workspace between monitors
bindsym $mod+Control+h move workspace to output left
bindsym $mod+Control+j move workspace to output down
bindsym $mod+Control+k move workspace to output up
bindsym $mod+Control+l move workspace to output right

# Enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# Change container layout (tabbed, toggle split)
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Focus the parent container
bindsym $mod+Shift+a focus parent

# Focus the child container
bindsym $mod+a focus child

# Switch to workspace
bindsym $mod+1 workspace $WS1
bindsym $mod+2 workspace $WS2
bindsym $mod+3 workspace $WS3
bindsym $mod+4 workspace $WS4
bindsym $mod+5 workspace $WS5
bindsym $mod+6 workspace $WS6

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $WS1
bindsym $mod+Shift+2 move container to workspace $WS2
bindsym $mod+Shift+3 move container to workspace $WS3
bindsym $mod+Shift+4 move container to workspace $WS4
bindsym $mod+Shift+5 move container to workspace $WS5
bindsym $mod+Shift+6 move container to workspace $WS6

# Toggle the floating mode for the window
bindsym $mod+Tab floating toggle

# Resize focused container's width/height
bindsym $mod+Left resize shrink width 5 px or 5 ppt
bindsym $mod+Right resize grow width 5 px or 5 ppt
bindsym $mod+Down resize shrink height 5 px or 5 ppt
bindsym $mod+Up resize grow height 5 px or 5 ppt
